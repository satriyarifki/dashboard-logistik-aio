<ngx-spinner
  color="white"
  type="square-jelly-box"
  [fullScreen]="true"
  size="medium"
  ><p style="color: white">Loading...</p></ngx-spinner
>
<div class="w-full font-manrope font-medium">
  <div class="flex flex-wrap mx-auto">
    <div class="px-2 w-full space-y-3">
      <!-- OVERHEAD TABLE -->
      <div
        *ngIf="userData.role == 1"
        class="h-fit bg-white px-8 py-5 space-y-3 text-center rounded-lg overflow-hidden drop-shadow-xl"
      >
        <div>
          <h1 class="text-xl font-semibold text-justify px-4">
            Budget Summary
          </h1>
        </div>
        <div
          class="w-full bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden"
        >
          <!-- Header -->
          <div
            class="px-6 py-2.5 grid gap-3 md:flex md:justify-between md:items-center border-b border-gray-200"
          >
            <!-- Input -->
            <div class="sm:col-span-1">
              <label for="hs-as-table-product-review-search" class="sr-only"
                >Search</label
              >
              <div class="relative">
                <input
                  type="text"
                  id="hs-as-table-product-review-search"
                  name="hs-as-table-product-review-search"
                  class="py-2 px-3 pl-11 block w-full border-gray-200 shadow-sm rounded-md text-sm focus:z-10 focus:border-blue-500 focus:ring-blue-500"
                  placeholder="Search"
                  [(ngModel)]="searchInputStorage"
                />
                <div
                  class="absolute inset-y-0 left-0 flex items-center pointer-events-none pl-4"
                >
                  <svg
                    class="h-4 w-4 text-gray-400"
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    fill="currentColor"
                    viewBox="0 0 16 16"
                  >
                    <path
                      d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"
                    />
                  </svg>
                </div>
              </div>
            </div>
            <!-- End Input -->
            <div>
              <a
                *ngIf="userData.role != -2"
                (click)="changeUpdateModal(1)"
                routerLinkActive="router-link-active"
                class="relative inline-flex cursor-pointer items-center justify-center px-4 py-1 overflow-hidden font-medium text-indigo-600 transition duration-300 ease-out border-2 border-cyan-600 rounded-full shadow-md group"
              >
                <span
                  class="absolute inset-0 flex items-center justify-center w-full h-full text-white duration-300 -translate-x-full bg-cyan-600 group-hover:translate-x-0 ease"
                >
                  <!-- <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path></svg> -->
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="currentColor"
                    height="24"
                    viewBox="0 -960 960 960"
                    width="24"
                  >
                    <path
                      d="M450-450H200v-60h250v-250h60v250h250v60H510v250h-60v-250Z"
                    />
                  </svg>
                </span>
                <span
                  class="absolute flex items-center justify-center w-full h-full text-cyan-600 font-semibold transition-all duration-300 transform group-hover:translate-x-full ease text-sm"
                  >Update</span
                >
                <span class="relative invisible">Update</span>
              </a>
            </div>
          </div>
          <!-- End Header -->

          <!-- Table -->
          <div class="min-w-full overflow-x-auto">
            <table id="stockTable" class="min-w-full divide-y divide-gray-200">
              <thead class="bg-gray-50 text-center">
                <tr>
                  <!-- <th scope="col" class="px-6 py-3 text-left">
                    <div class="flex items-center justify-center gap-x-2">
                      <span
                        class="text-xs font-semibold uppercase tracking-wide text-gray-800 text-center"
                      >
                        ID
                      </span>
                    </div>
                  </th> -->
                  <th scope="col" class="px-6 py-3 text-left">
                    <div class="flex items-center justify-center gap-x-2">
                      <span
                        class="text-xs font-semibold uppercase tracking-wide text-gray-800 text-center"
                      >
                        Name
                      </span>
                    </div>
                  </th>
                  <th scope="col" class="px-6 py-3 text-left">
                    <div class="flex items-center justify-center gap-x-2">
                      <span
                        class="text-xs font-semibold uppercase tracking-wide text-gray-800 text-center"
                      >
                        Value
                      </span>
                    </div>
                  </th>
                  <th scope="col" class="px-6 py-3 text-left">
                    <div class="flex items-center justify-center gap-x-2">
                      <span
                        class="text-xs font-semibold uppercase tracking-wide text-gray-800 text-center"
                      >
                        Running Month
                      </span>
                    </div>
                  </th>
                </tr>
              </thead>

              <tbody class="divide-y divide-gray-200">
                <tr
                  *ngFor="
                    let item of budgetSummary
                      | customFilter : searchInputStorage
                      | paginate : config
                  "
                  class="bg-white hover:bg-gray-50 text-center cursor-pointer"
                >
                  <td class="h-px w-px whitespace-nowrap py-2">
                    <h1 class="text-sm">{{ item.name }}</h1>
                  </td>
                  <td class="h-px w-px whitespace-nowrap py-2">
                    <h1 class="text-sm">
                      {{ item.value.toLocaleString() }}
                    </h1>
                  </td>
                  <td class="h-px w-px whitespace-nowrap py-2">
                    <h1 class="text-sm">
                      {{ item.month != null ? item.month : "-" }}
                    </h1>
                  </td>
                  <td class="h-px w-px whitespace-nowrap py-2"></td>
                  <!-- <td class="h-px w-px whitespace-nowrap">
            
            <h1 class="text-sm">{{ item.shift_remark }}</h1>
          </td> -->
                </tr>
              </tbody>
            </table>
          </div>
          <!-- End Table -->

          <!-- Footer -->
          <div
            class="px-6 py-2.5 grid gap-3 md:flex justify-around md:items-center border-t border-gray-200"
          >
          <pagination-template
          #pi="paginationApi"
          [id]="config.id"
          (pageChange)="config.currentPage = $event"
        >
          <div class="custom-pagination flex gap-1">
            <div class="pagination-previous">
              <!-- <span *ngIf="!p.isFirstPage()" (click)="p.previous()">
              <
            </span> -->
              <button
                (click)="pi.previous()"
                [disabled]="pi.isFirstPage()"
                [ngClass]="
                  pi.isFirstPage() ? 'text-gray-400' : 'text-gray-700'
                "
                type="button"
                class="py-2 px-3 inline-flex justify-center items-center gap-2 rounded-md border font-medium bg-white shadow-sm align-middle hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-white focus:ring-blue-600 transition-all text-sm"
              >
                <svg
                  class="w-3 h-3"
                  xmlns="http://www.w3.org/2000/svg"
                  width="16"
                  height="16"
                  fill="currentColor"
                  viewBox="0 0 16 16"
                >
                  <path
                    fill-rule="evenodd"
                    d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"
                  />
                </svg>
                
              </button>
            </div>
            <div
              class="page-number px-2.5 cursor-pointer flex items-center border rounded-md hover:bg-slate-100"
              [ngClass]="
                pi.getCurrent() === page.value
                  ? 'font-semibold border-black'
                  : ''
              "
              *ngFor="let page of pi.pages"
              [class.current]="pi.getCurrent() === page.value"
              (click)="pi.setCurrent(page.value)"
            >
              <h1 *ngIf="pi.getCurrent() !== page.value">
                {{ page.label }}
              </h1>
              <div *ngIf="pi.getCurrent() === page.value">
                <h1>{{ page.label }}</h1>
              </div>
            </div>
            <div class="pagination-next">
              <!-- <span *ngIf="!pi.isLastPage()" (click)="pi.next()">
              >
            </span> -->
              <button
                (click)="pi.next()"
                type="button"
                [disabled]="pi.isLastPage()"
                [ngClass]="
                  pi.isLastPage() ? 'text-gray-400' : 'text-gray-700'
                "
                class="py-2 px-3 inline-flex justify-center items-center gap-2 rounded-md border font-medium bg-white shadow-sm align-middle hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-white focus:ring-blue-600 transition-all text-sm"
              >
                
                <svg
                  class="w-3 h-3"
                  xmlns="http://www.w3.org/2000/svg"
                  width="16"
                  height="16"
                  fill="currentColor"
                  viewBox="0 0 16 16"
                >
                  <path
                    fill-rule="evenodd"
                    d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"
                  />
                </svg>
              </button>
            </div>
          </div>
        </pagination-template>
            <div class="flex gap-x-2 items-center">
              <label for="" class="text-xs font-medium">Show Per Page</label>
              <select
                #selectItemPerPage
                id="selectItemPerPage"
                (change)="changeItemPerPageSelect(selectItemPerPage.value)"
                class="py-1.5 px-3 pr-5 block border border-gray-200 rounded-md text-sm focus:border-blue-500 focus:ring-blue-500"
              >
                <option selected>7</option>
                <option>10</option>
                <option>15</option>
                <option>20</option>
                <option>25</option>
              </select>
            </div>
          </div>
          <!-- End Footer -->
        </div>
      </div>
    </div>
  </div>
</div>
<div
  *ngIf="updateBool"
  class="fixed z-50 top-0 left-0 w-screen h-screen flex justify-center items-stretch bg-gray-500 bg-opacity-40"
>
  <div
    class="flex flex-wrap px-5 py-3 bg-white rounded-lg shadow-xl self-center w-3/5 relative font-manrope"
  >
    <div class="w-full pb-2 flex justify-between">
      <h1 class="font-semibold">Change Budget Summary</h1>
      <a
        (click)="changeUpdateModal(0)"
        class="right-1 top-1 text-base px-1.5 py-1 rounded-full font-semibold hover:text-red-500 cursor-pointer"
        >X</a
      >
    </div>
    <form
      [formGroup]="form"
      (ngSubmit)="onUpdate()"
      class="w-full mr-3 space-y-1.5"
    >
      <div
        *ngFor="let item of budgetSummary; index as i"
        formArrayName="array"
        class="w-full"
      >
        <div [formGroupName]="i" class="flex">
          <div class="w-full px-2">
            <label
              *ngIf="i == 0"
              for="name"
              class="block text-sm text-gray-600 font-medium"
              >Name</label
            >
            <input
              id="name"
              type="text"
              formControlName="name"
              class="py-2 px-3 block w-full border border-gray-300 rounded-md text-sm focus:border-blue-500 focus:ring-blue-500"
            />
          </div>

          <div class="w-1/2 px-2">
            <label
              *ngIf="i == 0"
              for="value"
              class="block text-sm text-gray-600 font-medium"
              >Value</label
            >
            <input
              id="value"
              type="number"
              formControlName="value"
              class="py-2 px-3 block w-full border border-gray-300 rounded-md text-sm focus:border-blue-500 focus:ring-blue-500"
            />
          </div>
          <div class="w-1/2 px-2">
            <label
              *ngIf="i == 0"
              for="month"
              class="block text-sm text-gray-600 font-medium"
              >Running Month</label
            >
            <!-- <input
                id="month"
                type="text"
                formControlName="month"
                class="py-2 px-3 block w-full border border-gray-300 rounded-md text-sm focus:border-blue-500 focus:ring-blue-500"
              /> -->
            <select
            id="month"
              formControlName="month"
              class="py-2 px-3 block w-full border border-gray-200 rounded-lg text-sm focus:border focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none"
            >
              <option [value]="null">-</option>
              <option *ngFor="let item of monthList" [value]="item">{{ item }}</option>
            </select>
          </div>
        </div>
      </div>
      <div class="w-full flex justify-center">
        <button
          type="submit"
          class="w-1/5 inline-flex justify-center items-center gap-x-3 text-center bg-sky-600 hover:bg-sky-700 border border-transparent text-sm lg:text-base text-white font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-sky-600 focus:ring-offset-2 focus:ring-offset-white transition py-1 px-3"
        >
          Update
        </button>
      </div>
    </form>
  </div>
</div>
